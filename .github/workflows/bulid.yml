name: GitHub Actions Workflow

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

steps:
  - name: Checkout code
    uses: actions/checkout@v2

  - name: Set up .NET
    uses: actions/setup-dotnet@v1
    with:
    dotnet-version: 6.x

  - name: Restore NuGet packages
    run: |
    nuget restore

  - name: Download FBX SDK
    run: |
    wget ${{ env.FBX_SDK }}
    ./fbx*.exe /S # 这里使用 Linux 样式的命令，根据你的需求调整

  - name: Build and Publish
    run: |
    msbuild -m -t:AssetStudioGUI:publish -t:AssetStudioCLI:publish -r -p:Configuration=Release -v:minimal AssetStudio.sln

  - name: Create Artifact
    run: |
    TIME_STRING=$(date -u +"%Y%m%d%H%M%S%a")
    7z a -y -mx9 ${{ env.File_NAME }}-$TIME_STRING.${{ env.File_Format }} ${{ env.APPVEYOR_BUILD_FOLDER }}/AssetStudioGUI/bin/Release/net6.0-windows/publish/

  - name: Upload Artifact
    uses: actions/upload-artifact@v2
    with:
    name: ${{ env.File_NAME }}-$TIME_STRING.${{ env.File_Format }}
    path: ./${{ env.File_NAME }}-$TIME_STRING.${{ env.File_Format }}